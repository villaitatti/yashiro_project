<rs-text-annotation-type 
    label="Wikidata Entity"
    rdf-type='https://yashiro.itatti.harvard.edu/annotation-schema/Entity'
    icon-url='/images/dpub/wikidata.ico'>
                         
    <template id='annotation'>
        <semantic-query query='
            SELECT ?value ?label WHERE {
            BIND({{iri}} as ?iri)
            ?iri oa:hasBody ?body.
            ?body crm:P1_is_identified_by ?value.
            ?value rdfs:label ?label 
            }' template='{{> show}}'>

            <template id='show'>

                {{#> Default:AnnotationTemplate}}

                <div class="yashiro-annotation-content concept">
                    <span>Entity:</span>
                    <semantic-link iri="{{bindings.0.value.value}}">{{bindings.0.label.value}}</semantic-link>
                </div>

                {{/ Default:AnnotationTemplate}}
            </template>
        </semantic-query>
    
    </template>


    
    <semantic-context repository='ephedra'>
      <semantic-form-composite-input
        for='oaHasBody'
        new-subject-template='body'
        fields='[[fieldDefinitions
            annotation_type="https://y.itatti.harvard.edu/container/fieldDefinitionContainer/annotation_type"
            annotation_wikidata="https://y.itatti.harvard.edu/container/fieldDefinitionContainer/annotation_wikidata"
        ]]'
      >

          <semantic-form-hidden-input for='annotation_type' default-value='https://yashiro.itatti.harvard.edu/annotation-schema/Entity'></semantic-form-hidden-input>

          <semantic-form-autocomplete-input for='annotation_wikidata'></semantic-form-autocomplete-input>
      
        </semantic-form--input>
        <semantic-form-errors></semantic-form-errors>
      </semantic-form-composite-input>
    </semantic-context>

</rs-text-annotation-type>